openapi: 3.0.1
info:
  title: Environments
  description: ""
  termsOfService: https://go.microsoft.com/fwlink/?LinkId=329770
  contact:
    name: nugetvss
    email: nugetvss@microsoft.com
  license:
    name: MICROSOFT SOFTWARE LICENSE TERMS
    url: https://go.microsoft.com/fwlink/?LinkId=329770
  version: 7.2-preview
externalDocs:
  description: Azure DevOps REST APIs
  url: https://aka.ms/azure-devops-rest-apis
servers:
- url: https://dev.azure.com/
security:
- accessToken: []
tags:
- name: Environmentaccesstoken
- name: Environmentdeploymentrecords
- name: Environments
- name: Kubernetes
  description: Manage Kubernetes resources in environments.
- name: Pool
- name: Vmresource
  description: Manage Virtual Machine resources in environments.
paths:
  /{organization}/{project}/_apis/pipelines/environments:
    get:
      tags:
      - Environments
      description: Get all environments.
      operationId: Environments_List
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: name
        in: query
        schema:
          type: string
      - name: continuationToken
        in: query
        schema:
          type: string
      - name: $top
        in: query
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.1'
          to use this version of the api.
        required: true
        schema:
          type: string
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/EnvironmentInstance'
      security:
      - oauth2:
        - vso.build
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.1
      x-ms-vss-resource: environments
      x-ms-vss-method: GetEnvironments
      x-ms-preview: true
    post:
      tags:
      - Environments
      description: Create an environment.
      operationId: Environments_Add
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.1'
          to use this version of the api.
        required: true
        schema:
          type: string
      requestBody:
        description: Environment to create.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnvironmentCreateParameter'
        required: true
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnvironmentInstance'
      security:
      - oauth2:
        - vso.build_execute
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.1
      x-ms-vss-resource: environments
      x-ms-vss-method: AddEnvironment
      x-ms-preview: true
      x-codegen-request-body-name: body
  /{organization}/{project}/_apis/pipelines/environments/{environmentId}:
    get:
      tags:
      - Environments
      description: Get an environment by its ID.
      operationId: Environments_Get
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        description: ID of the environment.
        required: true
        schema:
          type: integer
          format: int32
      - name: expands
        in: query
        description: Include these additional details in the returned objects.
        schema:
          type: string
          enum:
          - none
          - resourceReferences
          x-ms-enum:
            name: EnvironmentExpands
            values:
            - value: none
              description: No additional properties
            - value: resourceReferences
              description: Include resource references referring to the environment.
        x-ms-enum:
          name: EnvironmentExpands
          values:
          - value: none
            description: No additional properties
          - value: resourceReferences
            description: Include resource references referring to the environment.
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.1'
          to use this version of the api.
        required: true
        schema:
          type: string
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnvironmentInstance'
      security:
      - oauth2:
        - vso.build
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.1
      x-ms-vss-resource: environments
      x-ms-vss-method: GetEnvironmentById
      x-ms-preview: true
    delete:
      tags:
      - Environments
      description: Delete the specified environment.
      operationId: Environments_Delete
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        description: ID of the environment.
        required: true
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.1'
          to use this version of the api.
        required: true
        schema:
          type: string
      responses:
        "200":
          description: successful operation
          content: {}
      security:
      - oauth2:
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.1
      x-ms-vss-resource: environments
      x-ms-vss-method: DeleteEnvironment
      x-ms-preview: true
    patch:
      tags:
      - Environments
      description: Update the specified environment.
      operationId: Environments_Update
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        description: ID of the environment.
        required: true
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.1'
          to use this version of the api.
        required: true
        schema:
          type: string
      requestBody:
        description: Environment data to update.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnvironmentUpdateParameter'
        required: true
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnvironmentInstance'
      security:
      - oauth2:
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.1
      x-ms-vss-resource: environments
      x-ms-vss-method: UpdateEnvironment
      x-ms-preview: true
      x-codegen-request-body-name: body
  /{organization}/{project}/_apis/pipelines/environments/{environmentId}/environmentdeploymentrecords:
    get:
      tags:
      - Environmentdeploymentrecords
      description: Get environment deployment execution history
      operationId: Environmentdeploymentrecords_List
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      - name: continuationToken
        in: query
        schema:
          type: string
      - name: top
        in: query
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.1'
          to use this version of the api.
        required: true
        schema:
          type: string
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/EnvironmentDeploymentExecutionRecord'
      security:
      - oauth2:
        - vso.build
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.1
      x-ms-vss-resource: environmentdeploymentrecords
      x-ms-vss-method: GetEnvironmentDeploymentExecutionRecords
      x-ms-preview: true
  /{organization}/{project}/_apis/pipelines/environments/{environmentId}/providers/kubernetes:
    post:
      tags:
      - Kubernetes
      operationId: Kubernetes_Add
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.2'
          to use this version of the api.
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/KubernetesResourceCreateParametersExistingEndpoint'
        required: true
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KubernetesResource'
      security:
      - oauth2:
        - vso.build_execute
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.2
      x-ms-vss-resource: kubernetes
      x-ms-vss-method: AddKubernetesResource
      x-ms-preview: true
      x-codegen-request-body-name: body
    patch:
      tags:
      - Kubernetes
      operationId: Kubernetes_Update
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.2'
          to use this version of the api.
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/KubernetesResourcePatchParameters'
        required: true
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KubernetesResource'
      security:
      - oauth2:
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.2
      x-ms-vss-resource: kubernetes
      x-ms-vss-method: UpdateKubernetesResource
      x-ms-preview: true
      x-codegen-request-body-name: body
  /{organization}/{project}/_apis/pipelines/environments/{environmentId}/providers/kubernetes/{resourceId}:
    get:
      tags:
      - Kubernetes
      operationId: Kubernetes_Get
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      - name: resourceId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.2'
          to use this version of the api.
        required: true
        schema:
          type: string
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KubernetesResource'
      security:
      - oauth2:
        - vso.build
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.2
      x-ms-vss-resource: kubernetes
      x-ms-vss-method: GetKubernetesResource
      x-ms-preview: true
    delete:
      tags:
      - Kubernetes
      operationId: Kubernetes_Delete
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      - name: resourceId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.2'
          to use this version of the api.
        required: true
        schema:
          type: string
      responses:
        "200":
          description: successful operation
          content: {}
      security:
      - oauth2:
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.2
      x-ms-vss-resource: kubernetes
      x-ms-vss-method: DeleteKubernetesResource
      x-ms-preview: true
  /{organization}/{project}/_apis/pipelines/environments/{environmentId}/providers/virtualmachines:
    get:
      tags:
      - Vmresource
      description: Get Virtual Machine Resources
      operationId: Vmresource_List
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        description: Id of the Environment
        required: true
        schema:
          type: integer
          format: int32
      - name: name
        in: query
        description: Name of the Virtual Machine Resource
        schema:
          type: string
      - name: tags
        in: query
        description: Tags of the Virtual Machine Resource
        schema:
          type: string
          format: array (string)
      - name: continuationToken
        in: query
        description: Gets the Virtual Machine Resources after the continuation token
          provided.
        schema:
          type: string
      - name: $top
        in: query
        description: Number of Virtual Machine Resources to get. Default is 1000.
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.1'
          to use this version of the api.
        required: true
        schema:
          type: string
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/VirtualMachineResource'
      security:
      - oauth2:
        - vso.build
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.1
      x-ms-vss-resource: vmresource
      x-ms-vss-method: GetVirtualMachineResources
      x-ms-preview: true
    put:
      tags:
      - Vmresource
      description: Replace Virtual Machine Resource
      operationId: Vmresource_Replace Virtual Machine Resource
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        description: Id of the Environment
        required: true
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.1'
          to use this version of the api.
        required: true
        schema:
          type: string
      requestBody:
        description: Properties to replace Virtual Machine Resource
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VirtualMachineResource'
        required: true
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VirtualMachineResource'
      security:
      - oauth2:
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.1
      x-ms-vss-resource: vmresource
      x-ms-vss-method: ReplaceVirtualMachineResource
      x-ms-preview: true
      x-codegen-request-body-name: body
    post:
      tags:
      - Vmresource
      description: Add Virtual Machine Resource
      operationId: Vmresource_Add
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        description: Id of the Environment
        required: true
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.1'
          to use this version of the api.
        required: true
        schema:
          type: string
      requestBody:
        description: Properties to create Virtual Machine Resource
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VirtualMachineResourceCreateParameters'
        required: true
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VirtualMachineResource'
      security:
      - oauth2:
        - vso.build_execute
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.1
      x-ms-vss-resource: vmresource
      x-ms-vss-method: AddVirtualMachineResource
      x-ms-preview: true
      x-codegen-request-body-name: body
    patch:
      tags:
      - Vmresource
      description: Update Virtual Machine Resource
      operationId: Vmresource_Update
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        description: Id of the Environment
        required: true
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.1'
          to use this version of the api.
        required: true
        schema:
          type: string
      requestBody:
        description: Properties to update Virtual Machine Resource
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VirtualMachineResource'
        required: true
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VirtualMachineResource'
      security:
      - oauth2:
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.1
      x-ms-vss-resource: vmresource
      x-ms-vss-method: UpdateVirtualMachineResource
      x-ms-preview: true
      x-codegen-request-body-name: body
  /{organization}/{project}/_apis/pipelines/environments/{environmentId}/providers/virtualmachines/{resourceId}:
    delete:
      tags:
      - Vmresource
      description: Delete Virtual Machine Resource
      operationId: Vmresource_Delete
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        description: Id of the Environment
        required: true
        schema:
          type: integer
          format: int32
      - name: resourceId
        in: path
        description: Id of the Virtual Machine Resource
        required: true
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.1'
          to use this version of the api.
        required: true
        schema:
          type: string
      responses:
        "200":
          description: successful operation
          content: {}
      security:
      - oauth2:
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.1
      x-ms-vss-resource: vmresource
      x-ms-vss-method: DeleteVirtualMachineResource
      x-ms-preview: true
  /{organization}/{project}/_apis/pipelines/environments/{environmentId}/providers/virtualmachines/pool:
    get:
      tags:
      - Pool
      operationId: Pool_Get
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.1'
          to use this version of the api.
        required: true
        schema:
          type: string
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskAgentPoolReference'
      security:
      - oauth2:
        - vso.build
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.1
      x-ms-vss-resource: pool
      x-ms-vss-method: GetLinkedPool
      x-ms-preview: true
  /{organization}/{project}/_apis/pipelines/environments/environmentaccesstoken/{environmentId}:
    post:
      tags:
      - Environmentaccesstoken
      description: GET a PAT token for creating and deleting deployment targets in
        an environment.
      operationId: Environmentaccesstoken_Generate Environment Access Token
      parameters:
      - name: organization
        in: path
        description: The name of the Azure DevOps organization.
        required: true
        schema:
          type: string
      - name: project
        in: path
        description: Project ID or project name
        required: true
        schema:
          type: string
      - name: environmentId
        in: path
        description: ID of the environment in which deployment targets are managed.
        required: true
        schema:
          type: integer
          format: int32
      - name: api-version
        in: query
        description: Version of the API to use.  This should be set to '7.2-preview.1'
          to use this version of the api.
        required: true
        schema:
          type: string
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                type: string
      security:
      - oauth2:
        - vso.build_execute
        - vso.environment_manage
      x-ms-docs-override-version: 7.2-preview.1
      x-ms-vss-resource: environmentaccesstoken
      x-ms-vss-method: GenerateEnvironmentAccessToken
      x-ms-preview: true
components:
  schemas:
    Demand:
      type: object
      properties:
        name:
          type: string
        value:
          type: string
      description: ""
    EnvironmentCreateParameter:
      type: object
      properties:
        description:
          type: string
          description: Description of the environment.
        name:
          type: string
          description: Name of the environment.
      description: Properties to create Environment.
    EnvironmentDeploymentExecutionRecord:
      type: object
      properties:
        definition:
          $ref: '#/components/schemas/TaskOrchestrationOwner'
        environmentId:
          type: integer
          description: Id of the Environment
          format: int32
        finishTime:
          type: string
          description: Finish time of the environment deployment execution
          format: date-time
        id:
          type: integer
          description: Id of the Environment deployment execution history record
          format: int64
        jobAttempt:
          type: integer
          description: Job Attempt
          format: int32
        jobName:
          type: string
          description: Job name
        owner:
          $ref: '#/components/schemas/TaskOrchestrationOwner'
        planId:
          type: string
          description: Plan Id
          format: uuid
        planType:
          type: string
          description: Plan type of the environment deployment execution record
        queueTime:
          type: string
          description: Queue time of the environment deployment execution
          format: date-time
        requestIdentifier:
          type: string
          description: Request identifier of the Environment deployment execution
            history record
        resourceId:
          type: integer
          description: Resource Id
          format: int32
        result:
          type: string
          description: Result of the environment deployment execution
          enum:
          - succeeded
          - succeededWithIssues
          - failed
          - canceled
          - skipped
          - abandoned
          x-ms-enum:
            name: TaskResult
            values:
            - value: succeeded
              description: ""
            - value: succeededWithIssues
              description: ""
            - value: failed
              description: ""
            - value: canceled
              description: ""
            - value: skipped
              description: ""
            - value: abandoned
              description: ""
        scopeId:
          type: string
          description: Project Id
          format: uuid
        serviceOwner:
          type: string
          description: Service owner Id
          format: uuid
        stageAttempt:
          type: integer
          description: Stage Attempt
          format: int32
        stageName:
          type: string
          description: Stage name
        startTime:
          type: string
          description: Start time of the environment deployment execution
          format: date-time
      description: EnvironmentDeploymentExecutionRecord.
    EnvironmentInstance:
      type: object
      properties:
        createdBy:
          $ref: '#/components/schemas/IdentityRef'
        createdOn:
          type: string
          description: Creation time of the Environment
          format: date-time
        description:
          type: string
          description: Description of the Environment.
        id:
          type: integer
          description: Id of the Environment
          format: int32
        lastModifiedBy:
          $ref: '#/components/schemas/IdentityRef'
        lastModifiedOn:
          type: string
          description: Last modified time of the Environment
          format: date-time
        name:
          type: string
          description: Name of the Environment.
        project:
          $ref: '#/components/schemas/ProjectReference'
        resources:
          type: array
          items:
            $ref: '#/components/schemas/EnvironmentResourceReference'
      description: Environment.
    EnvironmentReference:
      type: object
      properties:
        id:
          type: integer
          format: int32
        name:
          type: string
      description: ""
    EnvironmentResource:
      type: object
      properties:
        createdBy:
          $ref: '#/components/schemas/IdentityRef'
        createdOn:
          type: string
          format: date-time
        environmentReference:
          $ref: '#/components/schemas/EnvironmentReference'
        id:
          type: integer
          format: int32
        lastModifiedBy:
          $ref: '#/components/schemas/IdentityRef'
        lastModifiedOn:
          type: string
          format: date-time
        name:
          type: string
        tags:
          type: array
          description: Tags of the Environment Resource.
          items:
            type: string
        type:
          type: string
          description: Environment resource type
          enum:
          - undefined
          - generic
          - virtualMachine
          - kubernetes
          x-ms-enum:
            name: EnvironmentResourceType
            values:
            - value: undefined
              description: ""
            - value: generic
              description: Unknown resource type
            - value: virtualMachine
              description: Virtual machine resource type
            - value: kubernetes
              description: Kubernetes resource type
      description: ""
    EnvironmentResourceReference:
      type: object
      properties:
        id:
          type: integer
          description: Id of the resource.
          format: int32
        name:
          type: string
          description: Name of the resource.
        tags:
          type: array
          description: Tags of the Environment Resource Reference.
          items:
            type: string
        type:
          type: string
          description: Type of the resource.
          enum:
          - undefined
          - generic
          - virtualMachine
          - kubernetes
          x-ms-enum:
            name: EnvironmentResourceType
            values:
            - value: undefined
              description: ""
            - value: generic
              description: Unknown resource type
            - value: virtualMachine
              description: Virtual machine resource type
            - value: kubernetes
              description: Kubernetes resource type
      description: EnvironmentResourceReference.
    EnvironmentUpdateParameter:
      type: object
      properties:
        description:
          type: string
          description: Description of the environment.
        name:
          type: string
          description: Name of the environment.
      description: Properties to update Environment.
    GraphSubjectBase:
      type: object
      properties:
        _links:
          $ref: '#/components/schemas/ReferenceLinks'
        descriptor:
          type: string
        displayName:
          type: string
        url:
          type: string
      description: ""
    IdentityRef:
      properties:
        directoryAlias:
          type: string
        id:
          type: string
        imageUrl:
          type: string
        inactive:
          type: boolean
        isAadIdentity:
          type: boolean
        isContainer:
          type: boolean
        isDeletedInOrigin:
          type: boolean
        profileUrl:
          type: string
        uniqueName:
          type: string
      description: ""
      allOf:
      - $ref: '#/components/schemas/GraphSubjectBase'
    KubernetesResource:
      properties:
        clusterName:
          type: string
        namespace:
          type: string
        serviceEndpointId:
          type: string
          format: uuid
      description: ""
      allOf:
      - $ref: '#/components/schemas/EnvironmentResource'
    KubernetesResourceCreateParameters:
      type: object
      properties:
        clusterName:
          type: string
        name:
          type: string
        namespace:
          type: string
        tags:
          type: array
          description: Tags of the kubernetes resource.
          items:
            type: string
      description: ""
    KubernetesResourceCreateParametersExistingEndpoint:
      properties:
        serviceEndpointId:
          type: string
          format: uuid
      description: ""
      allOf:
      - $ref: '#/components/schemas/KubernetesResourceCreateParameters'
    KubernetesResourcePatchParameters:
      type: object
      properties:
        authorizationParameters:
          type: object
          additionalProperties:
            type: string
        providerType:
          type: string
          description: Provider type (CustomProvider or AzureKubernetesServiceProvider)
            of the resource to be updated
        resourceId:
          type: integer
          format: int32
      description: ""
    PackageVersion:
      type: object
      properties:
        major:
          type: integer
          format: int32
        minor:
          type: integer
          format: int32
        patch:
          type: integer
          format: int32
      description: ""
    ProjectReference:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
      description: ""
    PropertiesCollection:
      type: object
      properties:
        count:
          type: integer
          format: int32
        item:
          type: object
          properties: {}
        keys:
          type: array
          items:
            type: string
        values:
          type: array
          items:
            type: string
      description: ""
    ReferenceLinks:
      type: object
      properties:
        links:
          type: object
          additionalProperties:
            type: object
            properties: {}
      description: ""
    TaskAgent:
      properties:
        assignedAgentCloudRequest:
          $ref: '#/components/schemas/TaskAgentCloudRequest'
        assignedRequest:
          $ref: '#/components/schemas/TaskAgentJobRequest'
        authorization:
          $ref: '#/components/schemas/TaskAgentAuthorization'
        createdOn:
          type: string
          description: Date on which this agent was created.
          format: date-time
        lastCompletedRequest:
          $ref: '#/components/schemas/TaskAgentJobRequest'
        maxParallelism:
          type: integer
          description: Maximum job parallelism allowed for this agent.
          format: int32
        pendingUpdate:
          $ref: '#/components/schemas/TaskAgentUpdate'
        properties:
          $ref: '#/components/schemas/PropertiesCollection'
        statusChangedOn:
          type: string
          description: Date on which the last connectivity status change occurred.
          format: date-time
        systemCapabilities:
          type: object
          additionalProperties:
            type: string
          description: "System-defined capabilities supported by this agent's host.\
            \ Warning: To set capabilities use the PUT method, PUT will completely\
            \ overwrite existing capabilities."
        userCapabilities:
          type: object
          additionalProperties:
            type: string
          description: "User-defined capabilities supported by this agent's host.\
            \ Warning: To set capabilities use the PUT method, PUT will completely\
            \ overwrite existing capabilities."
      description: A task agent.
      allOf:
      - $ref: '#/components/schemas/TaskAgentReference'
    TaskAgentAuthorization:
      type: object
      properties:
        authorizationUrl:
          type: string
          description: Endpoint used to obtain access tokens from the configured token
            service.
        clientId:
          type: string
          description: Client identifier for this agent.
          format: uuid
        publicKey:
          $ref: '#/components/schemas/TaskAgentPublicKey'
      description: Provides data necessary for authorizing the agent using OAuth 2.0
        authentication flows.
    TaskAgentCloudRequest:
      type: object
      properties:
        agent:
          $ref: '#/components/schemas/TaskAgentReference'
        agentCloudId:
          type: integer
          format: int32
        agentConnectedTime:
          type: string
          format: date-time
        agentData:
          type: string
          format: JObject
        agentSpecification:
          type: string
          format: JObject
        pool:
          $ref: '#/components/schemas/TaskAgentPoolReference'
        provisionedTime:
          type: string
          format: date-time
        provisionRequestTime:
          type: string
          format: date-time
        releaseRequestTime:
          type: string
          format: date-time
        requestId:
          type: string
          format: uuid
      description: ""
    TaskAgentJobRequest:
      type: object
      properties:
        agentSpecification:
          type: string
          format: JObject
        assignTime:
          type: string
          description: The date/time this request was assigned.
          format: date-time
        data:
          type: object
          additionalProperties:
            type: string
          description: Additional data about the request.
        definition:
          $ref: '#/components/schemas/TaskOrchestrationOwner'
        demands:
          type: array
          description: A list of demands required to fulfill this request.
          items:
            $ref: '#/components/schemas/Demand'
        finishTime:
          type: string
          description: The date/time this request was finished.
          format: date-time
        hostId:
          type: string
          description: The host which triggered this request.
          format: uuid
        jobId:
          type: string
          description: ID of the job resulting from this request.
          format: uuid
        jobName:
          type: string
          description: Name of the job resulting from this request.
        lockedUntil:
          type: string
          description: The deadline for the agent to renew the lock.
          format: date-time
        matchedAgents:
          type: array
          items:
            $ref: '#/components/schemas/TaskAgentReference'
        matchesAllAgentsInPool:
          type: boolean
        orchestrationId:
          type: string
        owner:
          $ref: '#/components/schemas/TaskOrchestrationOwner'
        planGroup:
          type: string
        planId:
          type: string
          description: Internal ID for the orchestration plan connected with this
            request.
          format: uuid
        planType:
          type: string
          description: Internal detail representing the type of orchestration plan.
        poolId:
          type: integer
          description: The ID of the pool this request targets
          format: int32
        priority:
          type: integer
          format: int32
        queueId:
          type: integer
          description: The ID of the queue this request targets
          format: int32
        queueTime:
          type: string
          description: The date/time this request was queued.
          format: date-time
        receiveTime:
          type: string
          description: The date/time this request was receieved by an agent.
          format: date-time
        requestId:
          type: integer
          description: ID of the request.
          format: int64
        reservedAgent:
          $ref: '#/components/schemas/TaskAgentReference'
        result:
          type: string
          description: The result of this request.
          enum:
          - succeeded
          - succeededWithIssues
          - failed
          - canceled
          - skipped
          - abandoned
          x-ms-enum:
            name: TaskResult
            values:
            - value: succeeded
              description: ""
            - value: succeededWithIssues
              description: ""
            - value: failed
              description: ""
            - value: canceled
              description: ""
            - value: skipped
              description: ""
            - value: abandoned
              description: ""
        scopeId:
          type: string
          description: Scope of the pipeline; matches the project ID.
          format: uuid
        serviceOwner:
          type: string
          description: The service which owns this request.
          format: uuid
        statusMessage:
          type: string
        userDelayed:
          type: boolean
      description: A job request for an agent.
    TaskAgentPoolReference:
      type: object
      properties:
        id:
          type: integer
          format: int32
        isHosted:
          type: boolean
          description: Gets or sets a value indicating whether or not this pool is
            managed by the service.
        isLegacy:
          type: boolean
          description: Determines whether the pool is legacy.
        name:
          type: string
        options:
          type: string
          description: Additional pool settings and details
          enum:
          - none
          - elasticPool
          - singleUseAgents
          - preserveAgentOnJobFailure
          x-ms-enum:
            name: TaskAgentPoolOptions
            values:
            - value: none
              description: ""
            - value: elasticPool
              description: TaskAgentPool backed by the Elastic pool service
            - value: singleUseAgents
              description: Set to true if agents are re-imaged after each TaskAgentJobRequest
            - value: preserveAgentOnJobFailure
              description: Set to true if agents are held for investigation after
                a TaskAgentJobRequest failure
        poolType:
          type: string
          description: Gets or sets the type of the pool
          enum:
          - automation
          - deployment
          x-ms-enum:
            name: TaskAgentPoolType
            values:
            - value: automation
              description: A typical pool of task agents
            - value: deployment
              description: A deployment pool
        scope:
          type: string
          format: uuid
        size:
          type: integer
          description: Gets the current size of the pool.
          format: int32
      description: ""
    TaskAgentPublicKey:
      type: object
      properties:
        exponent:
          type: array
          description: Gets or sets the exponent for the public key.
          items:
            pattern: "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
            type: string
            format: byte
        modulus:
          type: array
          description: Gets or sets the modulus for the public key.
          items:
            pattern: "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
            type: string
            format: byte
      description: Represents the public key portion of an RSA asymmetric key.
    TaskAgentReference:
      type: object
      properties:
        _links:
          $ref: '#/components/schemas/ReferenceLinks'
        accessPoint:
          type: string
          description: This agent's access point.
        enabled:
          type: boolean
          description: Whether or not this agent should run jobs.
        id:
          type: integer
          description: Identifier of the agent.
          format: int32
        name:
          type: string
          description: Name of the agent.
        osDescription:
          type: string
          description: Agent OS.
        provisioningState:
          type: string
          description: Provisioning state of this agent.
        status:
          type: string
          description: Whether or not the agent is online.
          enum:
          - offline
          - online
          x-ms-enum:
            name: TaskAgentStatus
            values:
            - value: offline
              description: ""
            - value: online
              description: ""
        version:
          type: string
          description: Agent version.
      description: A reference to an agent.
    TaskAgentUpdate:
      type: object
      properties:
        currentState:
          type: string
          description: Current state of this agent update.
        reason:
          $ref: '#/components/schemas/TaskAgentUpdateReason'
        requestedBy:
          $ref: '#/components/schemas/IdentityRef'
        requestTime:
          type: string
          description: Date on which this update was requested.
          format: date-time
        sourceVersion:
          $ref: '#/components/schemas/PackageVersion'
        targetVersion:
          $ref: '#/components/schemas/PackageVersion'
      description: Details about an agent update.
    TaskAgentUpdateReason:
      type: object
      properties:
        code:
          type: string
          enum:
          - manual
          - minAgentVersionRequired
          - downgrade
          x-ms-enum:
            name: TaskAgentUpdateReasonType
            values:
            - value: manual
              description: ""
            - value: minAgentVersionRequired
              description: ""
            - value: downgrade
              description: ""
      description: ""
    TaskOrchestrationOwner:
      type: object
      properties:
        _links:
          $ref: '#/components/schemas/ReferenceLinks'
        id:
          type: integer
          format: int32
        name:
          type: string
      description: ""
    VirtualMachine:
      type: object
      properties:
        agent:
          $ref: '#/components/schemas/TaskAgent'
        id:
          type: integer
          format: int32
        tags:
          type: array
          items:
            type: string
      description: ""
    VirtualMachineGroup:
      properties:
        poolId:
          type: integer
          format: int32
      description: ""
      allOf:
      - $ref: '#/components/schemas/EnvironmentResource'
    VirtualMachineGroupCreateParameters:
      type: object
      properties:
        name:
          type: string
      description: ""
    VirtualMachineResource:
      properties:
        agent:
          $ref: '#/components/schemas/TaskAgent'
      description: ""
      allOf:
      - $ref: '#/components/schemas/EnvironmentResource'
    VirtualMachineResourceCreateParameters:
      type: object
      properties:
        virtualMachineResource:
          $ref: '#/components/schemas/VirtualMachineResource'
      description: ""
    VssJsonCollectionWrapper:
      properties:
        value:
          type: string
          description: The serialized item.
          format: T
      description: This class is used to serialize collections as a single JSON object
        on the wire.
      allOf:
      - $ref: '#/components/schemas/VssJsonCollectionWrapperBase'
    VssJsonCollectionWrapperBase:
      type: object
      properties:
        count:
          type: integer
          description: The number of serialized items.
          format: int32
      description: ""
  parameters:
    api-Version-preview.1:
      name: api-version
      in: query
      description: Version of the API to use.  This should be set to '7.2-preview.1'
        to use this version of the api.
      required: true
      schema:
        type: string
    api-Version-preview.2:
      name: api-version
      in: query
      description: Version of the API to use.  This should be set to '7.2-preview.2'
        to use this version of the api.
      required: true
      schema:
        type: string
  securitySchemes:
    accessToken:
      type: http
      description: Personal access token. Use any value for the user name and the
        token as the password.
      scheme: basic
    oauth2:
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: https://app.vssps.visualstudio.com/oauth2/authorize&response_type=Assertion
          tokenUrl: https://app.vssps.visualstudio.com/oauth2/token?client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer&grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer
          scopes:
            vso.build_execute: "Grants the ability to access build artifacts, including\
              \ build results, definitions, and requests, and the ability to queue\
              \ a build, update build properties, and the ability to receive notifications\
              \ about build events via service hooks."
            vso.environment_manage: Provides ability to manage environment
            vso.build: "Grants the ability to access build artifacts, including build\
              \ results, definitions, and requests, and the ability to receive notifications\
              \ about build events via service hooks."
x-ms-vss-area: environments
x-ms-vss-resource-area-id: 0a833654-df2a-437e-8253-fe6b63b82035
x-original-swagger-version: "2.0"
